\usepackage{inconsolata}
\usepackage{listings}

\definecolor{cinza}{HTML}{FCF8F8}

% define formato e estilo dos elementos do tipo Codigo Fonte
\lstset{language=PHP,
basicstyle=\ttfamily\scriptsize,
%basicstyle=\ttfamily,
keywordstyle=\color{javapurple}\bfseries,
stringstyle=\color{pblue},
commentstyle=\color{javagreen},
morecomment=[s][\color{javadocblue}]{/**}{*/},
morecomment=[s][\color{gray}]{@}{\ },
numbers=left,
numberstyle=\tiny\color{black},
backgroundcolor=\color{cinza},
stepnumber=2,
numbersep=8pt,
xleftmargin=14pt,
tabsize=4,
showspaces=false,
showstringspaces=false,
breaklines=true,}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\usepackage{adjustbox} % ajustar tabela ao tamanho da pagina

\usepackage{url}
\usepackage{varwidth}

\newsavebox\imagem
\newsavebox\legendaSup
\newsavebox\legendaInf
\newcommand{\imagemIF}[5]{
    \sbox{\imagem}{\includegraphics[#1]{#2}}
    \sbox{\legendaSup}{\begin{tikzpicture} \node at (0,0) {\begin{varwidth}{\wd\imagem} Figura \arabic{figure} - #3\end{varwidth}}; \end{tikzpicture}}
    \sbox{\legendaInf}{\begin{tikzpicture} \node at (0,0) {\begin{varwidth}{\wd\imagem}#4\end{varwidth}}; \end{tikzpicture}}
    \begin{figure}[H]
        \centering
        \captionsetup{justification=justified,format=plain,margin={{\dimexpr\textwidth/2 - \wd\imagem/2},{\wd\imagem/2 - \wd\legendaSup  + \textwidth/2}}}
        \caption{#3}
        \includegraphics[#1]{#2}
        \captionsetup{justification=justified,format=plain,margin={{\dimexpr\textwidth/2 - \wd\imagem/2}, {\dimexpr \wd\imagem/2 - \wd\legendaInf + \textwidth/2}}}
        \caption*{#4}
        \label{#5}
    \end{figure}
}

\renewcommand{\textual}{%
    \copypagestyle{mine}{plain}
    \makeevenhead{plain}{\thepage}{}{}
    \makeoddhead{plain}{}{}{\footnotesize\thepage}
    \makeevenfoot{plain}{}{}{}
    \makeoddfoot{plain}{}{}{}
    \pagestyle{mine}%
    \aliaspagestyle{chapter}{mine}
}
%\makepagestyle{abntchapfirst}
%\makeoddhead{abntchapfirst}{}{}{\ABNTEXfontereduzida\thepage}

\newcommand{\imagemIFF}[5]{
    \sbox{\imagem}{\includegraphics[#1]{#2}}
    \sbox{\legendaSup}{\begin{tikzpicture} \node at (0,0) {\begin{varwidth}{\wd\imagem} Figura \arabic{figure} - #3\end{varwidth}}; \end{tikzpicture}}
    \sbox{\legendaInf}{\begin{tikzpicture} \node at (0,0) {\begin{varwidth}{\wd\imagem}#4\end{varwidth}}; \end{tikzpicture}}
    \begin{figure}[H]
        \centering
        \captionsetup{justification=justified,format=plain,margin={{\dimexpr\textwidth/2 - \wd\imagem/2},{\wd\imagem/2 - \wd\legendaSup  + \textwidth/1.5}}}
        \caption*{#3}
        \includegraphics[#1]{#2}
        \captionsetup{justification=justified,format=plain,margin={{\dimexpr\textwidth/2 - \wd\imagem/2}, {\dimexpr \wd\imagem/2 - \wd\legendaInf + \textwidth/2}}}
        \caption*{#4}
        \label{#5}
    \end{figure}
}

%\rennewcommand{}


%\makeatletter
% uso o comando abaixo para pegar a definicao do \@dottedtocline
%\show\@dottedtocline

% substituo o ponto pela virgula e defino outro comando
%\def\@commatocline#1#2#3#4#5{\ifnum #1>\***@tocdepth \else
%\vskip \z@ \@plus .2\p@ {\leftskip #2\relax \rightskip
%\@tocrmarg \parfillskip -\rightskip \parindent #2\relax
%\@afterindenttrue \interlinepenalty \@M \leavevmode
%\@tempdima #3\relax \advance \leftskip \@tempdima
%\null \nobreak \hskip -\leftskip {#4}\nobreak
%\leaders \hbox
%{$\***@th \mkern \@dotsep mu\hbox {,}\mkern
%\@dotsep mu$}\hfill \nobreak \***@xt@ \@pnumwidth
%{\hfil \normalfont \normalcolor #5}\par }\fi}

% salvo uma copia do \@dottedtocline para eventual uso (opcional)
%\let\***@dottedtocline\@dottedtocline
% faco o \@dottedtocline virar o novo comando
%\let\@dottedtocline\@commatocline

%\makeatother

% Deixa os pontos do cap√≠tulo sem negrito
\renewcommand{\cftchapterleader}{\cftdotfill{\cftchapterdotsep}}
